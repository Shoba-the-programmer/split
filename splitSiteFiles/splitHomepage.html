<html>
<head> <title> Split! </title> <link rel="stylesheet" href="split.css"> <script src="splitnavs.js"></script></head>
<body>

<div id="header"> <h1 onclick="gotoWebpage(homeUrl)"> Split! </h1> <h1 id="login" onclick="gotoWebpage(loginUrl)"> Login </h1></div>

<div id="homePageContent"> 

<button onclick="gotoWebpage(writerPortalUrl)"> Write Stories </button> <!-- for now it goes straight to the writer's portal -->

<p> all published stories will go here for users to read through! more later </p>
<div id="activeStoriesTab"></div>
<div id="newestStoriesTab"></div>
</div>

<button onclick="checkDatabase()">Get Username</button>

<script>
  async function checkDatabase() {
      try {
          const response = await fetch('/check-db');
          const data = await response.json();

          if (data.success) {
              alert("Database connected successfully!");
          } else {
              alert("Failed to connect to the database.");
          }
      } catch (error) {
          console.error("Error checking database:", error);
          alert("An error occurred!");
      }
  }

    async function showUsername() {
        try {
            const response = await fetch('/username'); // Calls the API
            const data = await response.json();

            if (data.success) {
                alert("Username: " + data.username); // Show alert with username
            } else {
                alert("Failed to retrieve username");
            }
        } catch (error) {
            console.error("Error fetching username:", error);
            alert("An error occurred!");
        }
    }
</script>

<!-- <p id="showdbinformation"> d </p>  -->

<script>
    // Fetch the result from the server and display it in the <p> element
  /*  fetch('/')
      .then(response => response.text())
      .then(data => {
        document.getElementById('showdbinformation').innerText = data;
      })
      .catch(error => console.error('Error:', error));
      
    //run the connect and get username functions then show the username in the paragrapgh area
    // import { parafill } from '../db.js';
    fetch("/user").then(function (res) {
      return res.json()
    }).then(function(data) {
      console.log(data)
      document.getElementById('showdbinformation').innerText = data.data.username;
    }).catch(function(err){
      console.error(err)
    })
   */
  </script>

</body>
</html>